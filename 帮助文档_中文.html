<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>交叉口交通流量流向可视化工具 - 使用帮助</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Microsoft YaHei", "SimHei", "SimSun", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .section h3 {
            color: #764ba2;
            font-size: 1.4em;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        .section p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .section ul, .section ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        .section li {
            margin-bottom: 10px;
        }
        
        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .warning {
            background: #f8d7da;
            padding: 15px;
            border-left: 4px solid #dc3545;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .info {
            background: #d1ecf1;
            padding: 15px;
            border-left: 4px solid #17a2b8;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .step-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .step-box h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "Consolas", "Monaco", monospace;
            font-size: 0.9em;
        }
        
        .table-example {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .table-example th,
        .table-example td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .table-example th {
            background: #667eea;
            color: white;
        }
        
        .table-example tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #666;
            border-top: 1px solid #ddd;
        }
        
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .toc h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .toc ul {
            list-style: none;
            margin-left: 0;
        }
        
        .toc a {
            color: #667eea;
            text-decoration: none;
            display: block;
            padding: 5px 0;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚦 交叉口交通流量流向可视化工具</h1>
            <p>使用帮助文档 v2.1</p>
        </div>
        
        <div class="content">
            <div class="toc">
                <h3>📑 目录</h3>
                <ul>
                    <li><a href="#intro">1. 软件简介</a></li>
                    <li><a href="#start">2. 快速开始</a></li>
                    <li><a href="#data">3. 数据输入</a></li>
                    <li><a href="#draw">4. 绘制流量图</a></li>
                    <li><a href="#file">5. 文件操作</a></li>
                    <li><a href="#types">6. 交叉口类型</a></li>
                    <li><a href="#language">7. 多语言支持</a></li>
                    <li><a href="#faq">8. 常见问题</a></li>
                    <li><a href="#update">9. 版本更新</a></li>
                </ul>
            </div>
            
            <div class="section" id="intro">
                <h2>1. 软件简介</h2>
                <p>
                    <strong>交叉口交通流量流向可视化工具</strong>是一款专业的交通流量可视化工具，用于绘制交叉口的交通流量图。
                    软件支持3路、4路、5路、6路交叉口，可以直观地展示各方向的交通流量和流向关系。
                </p>
                <div class="info">
                    <strong>主要功能：</strong>
                    <ul>
                        <li>支持3-6路交叉口的流量绘制</li>
                        <li>支持左行规则和右行规则</li>
                        <li>自动计算进口和出口流量</li>
                        <li>可视化展示各流向的交通量</li>
                        <li>支持数据文件的保存和读取</li>
                        <li>支持简体中文和英文界面</li>
                    </ul>
                </div>
            </div>
            
            <div class="section" id="start">
                <h2>2. 快速开始</h2>
                
                <h3>2.1 启动软件</h3>
                <p>启动软件后，会弹出交叉口类型选择对话框：</p>
                <div class="step-box">
                    <h4>选择交叉口类型</h4>
                    <ul>
                        <li><strong>3路交叉口</strong> - 适用于T型或Y型交叉口</li>
                        <li><strong>4路交叉口</strong> - 适用于十字交叉口</li>
                        <li><strong>5路交叉口</strong> - 适用于五路交叉口</li>
                        <li><strong>6路交叉口</strong> - 适用于六路交叉口</li>
                        <li><strong>读取数据文件</strong> - 从已有文件加载数据</li>
                    </ul>
                </div>
                
                <h3>2.2 主界面介绍</h3>
                <p>选择交叉口类型后，进入主界面：</p>
                <ul>
                    <li><strong>数据表格</strong> - 显示各进口的数据输入框，窗口大小会根据交叉口路数自动调整</li>
                    <li><strong>语言菜单</strong> - 在菜单栏选择界面语言（简体中文/English）</li>
                    <li><strong>新建文件</strong> - 创建新的交叉口数据表格（可选择3-6路）</li>
                    <li><strong>读取数据</strong> - 从文件加载数据</li>
                    <li><strong>清空数据</strong> - 清空所有输入框的数据</li>
                    <li><strong>保存数据</strong> - 保存当前数据到文件</li>
                    <li><strong>数据另存为</strong> - 将数据保存为新文件</li>
                    <li><strong>绘制流量图</strong> - 生成并显示流量图</li>
                    <li><strong>帮助</strong> - 打开本帮助文档</li>
                    <li><strong>关于</strong> - 查看软件信息</li>
                </ul>
            </div>
            
            <div class="section" id="data">
                <h2>3. 数据输入</h2>
                
                <h3>3.1 数据表格说明</h3>
                <p>数据表格包含以下列：</p>
                <table class="table-example">
                    <tr>
                        <th>列名</th>
                        <th>说明</th>
                        <th>示例</th>
                    </tr>
                    <tr>
                        <td>进口编号</td>
                        <td>自动生成，不可编辑</td>
                        <td>进口1, 进口2, ...</td>
                    </tr>
                    <tr>
                        <td>进口名称</td>
                        <td>道路名称或方向名称</td>
                        <td>双龙大道, 天元路, 东, 南, 西, 北</td>
                    </tr>
                    <tr>
                        <td>方位角</td>
                        <td>进口方向角度（0-360度）</td>
                        <td>0, 90, 180, 270</td>
                    </tr>
                    <tr>
                        <td>流向数据</td>
                        <td>各流向的交通量（辆/小时）</td>
                        <td>100, 200, 150</td>
                    </tr>
                </table>
                
                <div class="highlight">
                    <strong>💡 提示：</strong> 方位角以正东方向为0度，逆时针增加。例如：
                    <ul>
                        <li>0度 = 正东</li>
                        <li>90度 = 正北</li>
                        <li>180度 = 正西</li>
                        <li>270度 = 正南</li>
                    </ul>
                </div>
                
                <h3>3.2 交通规则选择</h3>
                <p>在数据表格上方，可以选择交通规则：</p>
                <ul>
                    <li><strong>右行规则</strong> - 适用于大多数国家（如中国、美国等）</li>
                    <li><strong>左行规则</strong> - 适用于英国、日本、澳大利亚等国家</li>
                </ul>
                <div class="info">
                    <strong>💡 提示：</strong> 选择不同的交通规则会影响4路交叉口的表头顺序和流量图的绘制方式。
                </div>
                
                <h3>3.3 4路交叉口数据说明</h3>
                <p>对于4路交叉口，流向列的含义根据交通规则有所不同：</p>
                <table class="table-example">
                    <tr>
                        <th>交通规则</th>
                        <th>列顺序</th>
                        <th>说明</th>
                    </tr>
                    <tr>
                        <td rowspan="4">右行规则</td>
                        <td>掉头</td>
                        <td>从该进口掉头返回的流量</td>
                    </tr>
                    <tr>
                        <td>左转</td>
                        <td>从该进口左转的流量</td>
                    </tr>
                    <tr>
                        <td>直行</td>
                        <td>从该进口直行的流量</td>
                    </tr>
                    <tr>
                        <td>右转</td>
                        <td>从该进口右转的流量</td>
                    </tr>
                    <tr>
                        <td rowspan="4">左行规则</td>
                        <td>掉头</td>
                        <td>从该进口掉头返回的流量</td>
                    </tr>
                    <tr>
                        <td>右转</td>
                        <td>从该进口右转的流量</td>
                    </tr>
                    <tr>
                        <td>直行</td>
                        <td>从该进口直行的流量</td>
                    </tr>
                    <tr>
                        <td>左转</td>
                        <td>从该进口左转的流量</td>
                    </tr>
                </table>
                
                <h3>3.4 其他路数交叉口</h3>
                <p>对于3路、5路、6路交叉口，流向列使用通用格式：</p>
                <ul>
                    <li><strong>流线X_X</strong> - 掉头（从进口X回到出口X）</li>
                    <li><strong>流线X_X-1</strong> - 从进口X到出口X-1的流量</li>
                    <li><strong>流线X_X-2</strong> - 从进口X到出口X-2的流量</li>
                    <li>以此类推...</li>
                </ul>
            </div>
            
            <div class="section" id="draw">
                <h2>4. 绘制流量图</h2>
                
                <h3>4.1 绘制步骤</h3>
                <div class="step-box">
                    <h4>步骤1：输入数据</h4>
                    <p>在数据表格中输入各进口的名称、方位角和流向数据。</p>
                </div>
                
                <div class="step-box">
                    <h4>步骤2：选择交通规则</h4>
                    <p>根据实际情况选择右行规则或左行规则。</p>
                </div>
                
                <div class="step-box">
                    <h4>步骤3：点击"绘制流量图"</h4>
                    <p>点击主界面上的"绘制流量图"按钮，软件会自动生成流量图。</p>
                </div>
                
                <div class="step-box">
                    <h4>步骤4：查看结果</h4>
                    <p>流量图会在新窗口中显示，包含：</p>
                    <ul>
                        <li>各进口和出口的流量线（宽度表示流量大小）</li>
                        <li>各流向的路径（颜色对应进口颜色）</li>
                        <li>流量数值标注</li>
                        <li>道路名称标注</li>
                    </ul>
                </div>
                
                <h3>4.2 流量图说明</h3>
                <ul>
                    <li><strong>颜色</strong> - 每个进口使用不同颜色标识</li>
                    <li><strong>线宽</strong> - 线条宽度与流量大小成正比</li>
                    <li><strong>标注</strong> - 显示具体的流量数值（0流量不显示）</li>
                    <li><strong>路径</strong> - 显示车辆的实际行驶路径</li>
                </ul>
            </div>
            
            <div class="section" id="file">
                <h2>5. 文件操作</h2>
                
                <h3>5.1 保存数据</h3>
                <p>点击"保存数据"按钮可以将当前数据保存到文件。文件格式为文本文件（.txt），使用UTF-8编码。</p>
                
                <h3>5.2 读取数据</h3>
                <p>点击"读取数据"按钮可以从文件加载数据。软件支持以下格式：</p>
                <ul>
                    <li>新格式：第一行包含"本交叉口为X路交叉口，实行左/右行通行规则。"声明</li>
                    <li>如果未声明路数，软件会从数据长度自动推断</li>
                    <li>如果未声明通行规则，默认为右行规则</li>
                </ul>
                
                <h3>5.3 文件格式</h3>
                <p>数据文件格式示例（4路交叉口，右行规则）：</p>
                <div class="step-box">
                    <code>
本交叉口为4路交叉口，实行右行通行规则。<br>
双龙大道,天元路,双龙大道,天元路<br>
0,90,180,270<br>
10,20,15,25<br>
50,60,55,65<br>
100,110,105,115<br>
30,40,35,45<br>
                    </code>
                </div>
                <p>文件说明：</p>
                <ol>
                    <li>第一行：交叉口路数和通行规则声明</li>
                    <li>第二行：各进口名称（逗号分隔）</li>
                    <li>第三行：各进口方位角（逗号分隔）</li>
                    <li>后续行：各流向的流量数据（每行对应一个流向）</li>
                </ol>
            </div>
            
            <div class="section" id="types">
                <h2>6. 交叉口类型说明</h2>
                
                <h3>6.1 3路交叉口</h3>
                <p>适用于T型或Y型交叉口，有3个进口和3个出口。</p>
                
                <h3>6.2 4路交叉口</h3>
                <p>最常见的十字交叉口，有4个进口和4个出口。流向包括：掉头、左转、直行、右转（右行规则）或掉头、右转、直行、左转（左行规则）。</p>
                
                <h3>6.3 5路交叉口</h3>
                <p>五路交叉口，有5个进口和5个出口。适用于复杂的道路交叉口。</p>
                
                <h3>6.4 6路交叉口</h3>
                <p>六路交叉口，有6个进口和6个出口。适用于非常复杂的道路交叉口。</p>
            </div>
            
            <div class="section" id="language">
                <h2>7. 多语言支持</h2>
                
                <h3>7.1 切换语言</h3>
                <p>软件支持简体中文和英文两种界面语言。切换方法：</p>
                <div class="step-box">
                    <h4>方法1：使用菜单栏</h4>
                    <p>点击菜单栏中的"Language / 语言"菜单，选择"简体中文"或"English"。</p>
                </div>
                
                <h3>7.2 语言切换说明</h3>
                <ul>
                    <li>切换语言后，所有界面文本会立即更新</li>
                    <li>包括按钮、标签、消息框等所有文本</li>
                    <li>帮助文档会根据当前语言自动选择对应版本</li>
                    <li>数据文件格式不受语言影响</li>
                </ul>
            </div>
            
            <div class="section" id="faq">
                <h2>8. 常见问题</h2>
                
                <h3>Q1: 如何修改已输入的数据？</h3>
                <p><strong>A:</strong> 直接在数据表格中修改对应的单元格即可。修改后窗口标题会显示"未保存"提示。</p>
                
                <h3>Q2: 流量图显示不正常或报错怎么办？</h3>
                <p><strong>A:</strong> 请检查：</p>
                <ul>
                    <li>数据是否完整（所有必填字段都已填写）</li>
                    <li>数值格式是否正确（应为数字）</li>
                    <li>方位角是否在合理范围内（0-360度）</li>
                    <li>如果绘图报错，尝试将方位角调大或调小1度</li>
                </ul>
                
                <h3>Q3: 可以导出流量图吗？</h3>
                <p><strong>A:</strong> 目前版本支持导出为svg、pdf、png、jpg、tif格式的流量图，推荐使用svg格式的矢量图。</p>
                
                <h3>Q4: 支持哪些数据格式？</h3>
                <p><strong>A:</strong> 软件支持文本文件（.txt）格式，使用逗号分隔值。支持UTF-8、GBK、GB2312等多种编码。</p>
                
                <h3>Q5: 如何计算方位角？</h3>
                <p><strong>A:</strong> 方位角以正东方向为0度，逆时针增加：</p>
                <ul>
                    <li>0度 = 正东</li>
                    <li>90度 = 正北</li>
                    <li>180度 = 正西</li>
                    <li>270度 = 正南</li>
                </ul>
                
                <h3>Q6: 流量可不可以输入0？</h3>
                <p><strong>A:</strong> 可以，软件支持输入0，空缺数据也会被视为0。0表示没有流量，不会在图上绘制，也不会标注。</p>
                
                <h3>Q7: 左行规则和右行规则有什么区别？</h3>
                <p><strong>A:</strong> 主要区别在于4路交叉口的表头顺序和流量图的绘制方式。左行规则下，表头顺序为"掉头、右转、直行、左转"；右行规则下，表头顺序为"掉头、左转、直行、右转"。</p>
                
                <h3>Q8: 如何切换界面语言？</h3>
                <p><strong>A:</strong> 点击菜单栏中的"Language / 语言"菜单，选择"简体中文"或"English"即可。</p>
            </div>
            
            <div class="section" id="update">
                <h2>9. 版本更新</h2>
                
                <h3>v2.1 更新内容（稳定版）</h3>
                <div class="info">
                    <ul>
                        <li><strong>新增功能</strong>：
                            <ul>
                                <li>左行规则支持：支持左行规则和右行规则两种交通规则</li>
                                <li>交通规则选择：可在数据表格上方选择交通规则</li>
                                <li>动态表头：4路交叉口表头根据交通规则自动调整</li>
                                <li>文件格式更新：数据文件包含交通规则信息</li>
                                <li>智能文件解析：如果未声明路数，自动从数据推断</li>
                                <li>默认交通规则：如果未声明，默认为右行规则</li>
                                <li>多语言支持：支持简体中文和英文界面</li>
                                <li>语言选择菜单：可在菜单栏中切换界面语言（启动界面、主界面、对话框）</li>
                                <li>全局语言切换：语言切换对所有窗口生效</li>
                                <li>帮助文档分离：中英文帮助文档分别提供</li>
                                <li>自适应界面：按钮宽度和窗口大小根据语言自动调整</li>
                                <li>配置保存功能：自动保存语言和通行规则设置，下次启动时自动恢复</li>
                                <li>配置文件：使用config.txt格式，支持手动编辑，包含中英文说明</li>
                            </ul>
                        </li>
                        <li><strong>改进</strong>：
                            <ul>
                                <li>所有界面文本使用翻译函数，支持动态切换</li>
                                <li>导出文件对话框的文件类型和默认文件名已翻译</li>
                                <li>语言切换后自动调整窗口大小，避免文本显示问题</li>
                                <li>启动界面添加帮助和关于按钮，方便快速访问</li>
                            </ul>
                        </li>
                    </ul>
                </div>
                
                <h3>v1.3 更新内容</h3>
                <div class="info">
                    <ul>
                        <li><strong>新增功能</strong>：
                            <ul>
                                <li>出口宽度条箭头：在出口宽度条末端添加实心箭头</li>
                                <li>延长进口宽度条：进口宽度条现在向外延长45单位</li>
                                <li>扩大绘图窗口：绘图窗口范围从(-330, 330)扩大到(-375, 375)</li>
                                <li>调整进口名称标签：进口名称标签沿方位角方向向外移动45单位</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p><strong>交叉口交通流量流向可视化工具 v2.1</strong></p>
            <p>版权所有 (C) 江浦马保国 | 欢迎复制、传播本软件</p>
            <p>如有问题，请查看软件"关于"信息或联系开发者</p>
        </div>
    </div>
</body>
</html>

